<section class="box-typical scenario" ng-repeat="scenario in scenarios" style="border-left-color: {{ scenario.color }}">
    <header class="box-typical-header">
        <div class="tbl-row">
            <div class="col-md-4 tbl-cell tbl-cell-title">
                <div
                    class="image"
                    ng-if="scenario.image !== ''"
                    style="background-image: url('assets/images/scenarios/{{ scenario.image }}')">
                </div>
                <div class="title">
                    <h3>{{ scenario.name }}</h3>
                    <div class="font-11 color-blue-grey-lighter uppercase">Scenario</div>
                </div>
                <i class="fa fa-pencil edit color-blue-grey-lighter"></i>
            </div>

            <div class="col-md-2 tbl-cell pull-right text-right m-r-lg">
                {{ (scenario.income + scenario.expenditure) | currency }}
                <div class="font-11 color-blue-grey-lighter uppercase">Net Earnings</div>
            </div>

            <div class="col-md-2 tbl-cell pull-right text-right">
                {{ scenario.expenditure | currency }}
                <div class="font-11 color-blue-grey-lighter uppercase">Expenditure</div>
            </div>

            <div class="col-md-2 tbl-cell pull-right text-right">
                {{ scenario.income | currency }}
                <div class="font-11 color-blue-grey-lighter uppercase">Income</div>
            </div>
        </div>
    </header>


    <div class="box-typical-body">
        <div class="table-responsive">
            <table class="table table-hover table-datatable table-budgets" st-table="scenario.budgets">
                <thead>
                    <tr>
                        <th st-sort="category">Category</th>
                        <th colspan="2"></th>
                        <th st-sort="progress">Progress</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="budget in scenario.budgets">
                        <td>
                            {{ budget.category.hierarchy.join(', ') }}
                            <div class="font-11 color-blue-grey-lighter uppercase">{{ budget.type | capitalize }}</div>
                        </td>
                        <td class="text-right">
                            <div class="font-11 color-blue-grey-lighter uppercase">Spent</div>
                            {{ budget.total | currency }}
                        </td>
                        <td class="text-left">
                            <div class="font-11 color-blue-grey-lighter uppercase">Allowance</div>
                            {{ budget.allowance | currency }}
                        </td>
                        <td>
                            <div class="progress-with-amount">
        						<progress
                                    class="progress progress-success progress-no-margin"
                                    value="{{ budget.progress >= 100 ? 100 : budget.progress }}"
                                    max="100"
                                    ng-class="{
                                        'progress-success': (budget.progress < 90),
                                        'progress-warning': (budget.progress > 90 && budget.progress < 100),
                                        'progress-danger': (budget.progress > 100)
                                    }">
                                    {{ budget.progress | numberPadding: 2 }}
                                </progress>
        						<div class="progress-with-amount-number">{{ budget.progress | numberPadding: 2 }}%</div>
        					</div>
                        </td>
                        <td class="text-right">
                            <button type="button" class="btn btn-inline btn-regular">Actions</button>
                        </td>
                    </tr>
                    <tr ng-show="scenario.budgets.length == 0">
                        <td colspan="6" class="text-center">
                            No budgets to display.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div><!--.box-typical-body-->
</section>
